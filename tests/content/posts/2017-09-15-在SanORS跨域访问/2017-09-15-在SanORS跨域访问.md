Title: 在SanORS跨域访问
Date: 2017-09-15 14:50:05
Modified: 2017-09-15 14:50:05
Slug: Cross_domain_access_in_Sanic
Tags: scain, CORS
Author: Xiaojie Luo

---

在 Sanic 开发 RESTful api 服务，要注意 CORS 问题，可以通过下面方法，让 Sanic 服务器支持跨域请求资源。

## 1. 设置 response 中的 headers 元素
添下几元素到 response headers 中

```python
access = {
    'Access-Control-Allow-Origin':'*',
    'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS, HEAD',
    "Access-Control-Expose-Headers": "*",
    'Access-Control-Max-Age': "1000",
    "Access-Control-Allow-Headers": "X-LC-Id, X-LC-Session, X-LC-Key, X-LC-Sign",
}
```
`Access-Control-Expose-Headers` 表示可以被请求方修改的 headers 名称。

## 2. 控制器中新增一个响应 OPTIONS 控制器

```

async def options(self, requests):
    return self.json({"ok":"ok"})

```

返回包含修改过 headers 的 json 数据
